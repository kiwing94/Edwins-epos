<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kiwing.org — Languages</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
</head>

<body>

  <header class="topbar">
    <div class="logo">KIWING • LANGUAGES</div>
    <button class="menu-btn" onclick="toggleSidebar()">☰</button>
  </header>

  <div class="container">

    <!-- SIDEBAR -->
    <aside id="sidebar" class="sidebar">
      <h2>Languages</h2>

      <div class="language-grid">
        
        <a href="proto_indo_european.html" class="lang-card"> Proto-Indo-European <span>Proto</span></a>
        <a href="proto_semitic.html" class="lang-card"> Proto-Semitic <span>Proto</span></a>
        <a href="proto_japonic.html" class="lang-card"> Proto-Japonic <span>Proto</span></a>
        <a href="etruscan.html" class="lang-card"> Etruscan <span>Ancient</span></a>
        <a href="hittite.html" class="lang-card"> Hittite <span>Ancient</span></a>

        <p class="category"> Ancient Grammar</p>
        <a href="grammar_in_ancient_inflected_langs.html">Grammar Overview</a>
        <a href="latin_dictionary.html"> Small Latin Dictionary</a>
          
      </nav>
  </ul>
</div>

    </main>

  </div>

  <script>
    function toggleSidebar() {
      document.getElementById("sidebar").classList.toggle("open");
    }
  </script>
<script>
let words = [];
let filtered = [];
let pointer = 0;
const BATCH = 50;
const grid = document.getElementById("latinGrid");
const searchBox = document.getElementById("searchBox");

// Load JSON
fetch("latin_words.json")
  .then(res => res.json())
  .then(data => {
    words = Object.entries(data).sort((a, b) => a[0].localeCompare(b[0]));
    filtered = [...words];
    loadBatch();
  });

// Load 50 at a time
function loadBatch() {
  const slice = filtered.slice(pointer, pointer + BATCH);
  pointer += BATCH;

  slice.forEach(([latin, english]) => {
    grid.insertAdjacentHTML("beforeend", `
      <div class="latin-card">
        <strong>${latin}</strong>
        <div>${english}</div>
      </div>
    `);
  });
}

// Infinite scroll listener
window.addEventListener("scroll", () => {
  if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 100) {
    loadBatch();
  }
});

// Search function
searchBox.addEventListener("input", () => {
  const query = searchBox.value.toLowerCase();
  pointer = 0;
  grid.innerHTML = "";

  filtered = words.filter(([latin]) => latin.toLowerCase().includes(query));
  loadBatch();
});

// Alphabet filter
document.querySelectorAll(".alphabet-bar span").forEach(el => {
  el.addEventListener("click", () => {
    const letter = el.dataset.letter;
    searchBox.value = "";
    pointer = 0;
    grid.innerHTML = "";

    if (letter === "all") {
      filtered = words;
    } else {
      filtered = words.filter(([latin]) => latin.startsWith(letter));
    }

    loadBatch();
  });
});
</script>

</body>

</html>
